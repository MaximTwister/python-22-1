# Some fastfood serves meals (pair of main course + drink) 
They ask you to build database for them and write several specific SQL queries.

### SQL database should have next tables:
customers, main_courses, drinks, meals, orders, discounts

----
`customers` - regular table with our sweat customers
**COLUMNS**: customer_id, name, mail, phone, ...

----
`main_courses` - regular fastfood main courses (burger, salad, sandwich, ...)
**COLUMNS**: main_course_id, name, price, ...

----
`drinks` - regular drinks (cola, spring water, beer, ...)
**COLUMNS**: drink_id, name, price, ...

----
`meals` - all combinations (pairs) of main_courses and drinks
**COLUMNS**: meal_id, main_course_id, drink_id

----
`orders` - table with customer's orders
**COLUMNS**: order_id, customer_id, order_sum_price

----
`order_meal` - many-to-many table which is joining orders and corresponding meals
**COLUMNS**: order_id, meal_id, portions.

----
`discounts` - contains all discounts
**COLUMNS**: customer_id, discount_percentage, meal_id, period
>NOTE: not always customer_id must be present - i.e. some discounts can be applied for all our customers, but yes some only for concrete customers.


----
### SQL queries 

Try to write at least 3 tasks from the list:
1. Find the total revenue generated by the restaurant for a specific period of time.
2. List all customers who have ordered a particular main course.
3. Find the most popular meal (pair of main_course + drink) among our customers (during all the period of time) and put 10% discount on that meal for today.
4. Find the customer who has placed the maximum number of orders.
5. Calculate the average order value (during all the time).
6. Find the top 5 customers with the highest total order sum price and gave them 25% discount for this month for all meal types (any combination of main_course + drink)
7. Calculate the total revenue generated by each main course.


----
### NOTES

>NOTE: PostgreSQL provides several data types for storing period of time:
>`interval`: This data type is used to store a period of time. It can store intervals with up to microseconds:
>`period INTERVAL`
>`daterange`: This data type is used to store a range of dates. It can be used to store a period of time by storing the start and end dates of the period:
>`period DATERANGE`

>NOTE: To execute SQL queries stored in a file in psql we can use the \i (or \include) command followed by the path to the SQL file:
> 1. `psql -U <username> -d <database_name>`
> 2. Navigate to the directory where your SQL file is located: `cd /path/to/sql/file/`
> 3. Execute the SQL queries from the file using the `\i` command: `\i maksym_01.sql`

>NOTE: In PostgreSQL we can use variables.
> The `SELECT INTO` statement will save the result of a `SELECT` query into a variable:
```sql
 -- Declare a variable
DECLARE my_var INTEGER;

-- Save the result of a SELECT query to the variable
SELECT COUNT(*) INTO my_var FROM my_table WHERE status = 'active';

-- Use the variable in a query
SELECT * FROM my_other_table WHERE id = my_var;
 ```
